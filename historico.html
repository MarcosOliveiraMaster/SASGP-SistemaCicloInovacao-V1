<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hist√≥rico - SASGP</title>
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="banco.js" defer></script>
    <script src="script.js" defer></script>
    <script src="utilitarios.js" defer></script>
    <script src="script-extra.js" defer></script>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-extra.css">
</head>
<body>
    <div class="container">
        <div class="historico-container">
            <!-- Banner Superior -->
            <div class="historico-header">
                <div>
                    <h1>Hist√≥rico da Solu√ß√£o</h1>
                    <p id="nomeSolucaoHistorico" class="subtitle">Carregando...</p>
                </div>
                <button class="btn btn-voltar" onclick="window.location.href='index.html'">
                    ‚Üê Voltar
                </button>
            </div>

            <!-- Informa√ß√µes da Solu√ß√£o -->
            <div class="historico-info-grid">
                <div class="info-card">
                    <h3>Status Atual</h3>
                    <div class="status-indicator">
                        <div class="status-dot" id="statusDotHistorico"></div>
                        <span class="status-text" id="statusTextHistorico">Carregando...</span>
                    </div>
                </div>
                <div class="info-card">
                    <h3>Tipo de Solu√ß√£o</h3>
                    <p id="tipoSolucao">-</p>
                </div>
                <div class="info-card">
                    <h3>√öltima Atualiza√ß√£o</h3>
                    <p id="ultimaAtualizacao">--/--/----</p>
                </div>
            </div>

            <!-- Filtros e Ordena√ß√£o -->
            <div class="filters-container">
                <select id="filterAutorHistorico" class="filter-select">
                    <option value="todos">Todos os Autores</option>
                    <option value="Simone">Simone</option>
                    <option value="Gabriel">Gabriel</option>
                    <option value="Diego">Diego</option>
                    <option value="Emily">Emily</option>
                </select>
                <select id="filterOrdenacao" class="filter-select">
                    <option value="desc">Mais Recentes Primeiro</option>
                    <option value="asc">Mais Antigos Primeiro</option>
                </select>
                <button class="btn btn-secondary" id="btnFiltrarHistorico">Filtrar</button>
                <button class="btn btn-secondary" id="btnRecarregarHistoricos" title="Recarregar hist√≥rico">
                    üîÑ Atualizar
                </button>
                <button class="btn btn-primary" id="btnAdicionarHistorico">
                    + Adicionar Etapa
                </button>
            </div>

            <!-- Grid de Cards de Hist√≥rico -->
            <div class="historicos-grid" id="historicosGrid">
                <!-- Cards ser√£o carregados aqui -->
            </div>

            <!-- Mensagem quando n√£o houver hist√≥rico -->
            <div id="semHistoricos" class="sem-historicos" style="display: none;">
                <div style="font-size: 3rem; margin-bottom: 20px;">üìã</div>
                <h3>Nenhum registro no hist√≥rico</h3>
                <p>Adicione a primeira etapa de desenvolvimento!</p>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar Hist√≥rico -->
    <div id="modalHistorico" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Nova Etapa de Desenvolvimento</h3>
                <button class="close-modal" id="closeModalHistorico">√ó</button>
            </div>
            
            <div class="form-group">
                <label for="selectAutorHistorico" class="rating-label">Autor</label>
                <select id="selectAutorHistorico" class="filter-select">
                    <option value="Simone">Simone</option>
                    <option value="Gabriel">Gabriel</option>
                    <option value="Diego">Diego</option>
                    <option value="Emily">Emily</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>

            <div class="form-group">
                <label for="tituloHistorico" class="rating-label">T√≠tulo/R√≥tulo</label>
                <input type="text" id="tituloHistorico" placeholder="Ex: Reuni√£o de alinhamento, Prot√≥tipo inicial..." maxlength="100">
                <div class="char-counter">
                    <span id="charCountTitulo">0</span>/100 caracteres
                </div>
            </div>

            <div class="form-group">
                <label for="comentarioHistorico" class="rating-label">Descri√ß√£o da Etapa</label>
                <textarea 
                    id="comentarioHistorico" 
                    placeholder="Descreva os detalhes desta etapa de desenvolvimento..."
                    maxlength="1000"
                    rows="5"></textarea>
                <div class="char-counter">
                    <span id="charCountHistorico">0</span>/1000 caracteres
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn btn-cancel" id="cancelHistorico">Cancelar</button>
                <button class="btn btn-primary" id="salvarHistorico">Salvar Etapa</button>
            </div>
        </div>
    </div>

    <!-- Modal para Ver Detalhes do Hist√≥rico -->
    <div id="modalDetalhesHistorico" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Detalhes do Hist√≥rico</h3>
                <button class="close-modal" id="closeModalDetalhesHistorico">√ó</button>
            </div>
            
            <div class="detalhes-avaliacao">
                <div class="detalhes-item">
                    <label>Autor</label>
                    <p id="detalheAutorHistorico">-</p>
                </div>
                <div class="detalhes-item">
                    <label>T√≠tulo</label>
                    <p id="detalheTituloHistorico">-</p>
                </div>
                <div class="detalhes-item">
                    <label>Data</label>
                    <p id="detalheDataHistorico">-</p>
                </div>
                <div class="detalhes-item">
                    <label>Descri√ß√£o</label>
                    <p id="detalheDescricaoHistorico">-</p>
                </div>
            </div>

            <div class="modal-buttons">
                <button class="btn btn-primary" id="fecharDetalhesHistorico">Fechar</button>
                <button class="btn btn-secondary" id="excluirHistorico" style="background: #ff4444; color: white;">
                    Excluir Registro
                </button>
            </div>
        </div>
    </div>

    <!-- Modal de Confirma√ß√£o de Exclus√£o do Hist√≥rico -->
    <div id="modalConfirmacaoExclusaoHistorico" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirmar Exclus√£o</h3>
                <button class="close-modal" id="closeModalConfirmacaoHistorico">√ó</button>
            </div>
            
            <p class="confirmacao-texto">
                Tem certeza que deseja excluir este registro do hist√≥rico? Esta a√ß√£o n√£o pode ser desfeita.
            </p>

            <div class="modal-buttons">
                <button class="btn btn-cancel" id="cancelarExclusaoHistorico">Cancelar</button>
                <button class="btn btn-primary" id="confirmarExclusaoHistorico" style="background: #ff4444; color: white;">
                    Excluir Permanentemente
                </button>
            </div>
        </div>
    </div>
</body>
</html>